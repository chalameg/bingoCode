(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[132],{35876:function(e,t,n){"use strict";var o=n(85893),a=n(64509),s=n(50657);t.Z=function(e){var t=e.isOpen,n=e.title,c=e.handleClose,r=e.children;return(0,o.jsxs)(s.Z,{onClose:c,open:t,children:[(0,o.jsx)(a.Z,{children:n}),r]})}},33372:function(e,t,n){"use strict";var o=n(85893);t.Z=function(e){var t=e.disabled,n=e.onClick,a=e.buttonText,s=e.icon,c=void 0===s?"":s,r=e.className,i=void 0===r?"":r,u=e.reverse,l=void 0!==u&&u;return(0,o.jsxs)("button",{disabled:t,className:"".concat(i," flex align-center justify-center ").concat(l?"reverse":""),onClick:n,children:[a," ",c]})}},98694:function(e,t,n){"use strict";var o=n(47568),a=n(14924),s=n(70655),c=n(85893),r=n(67294),i=n(48732),u=n(83491),l=n(79352),h=n(63750),_=n(43024),m=n(99017),d=n(3896),f=(n(60482),n(93350)),p=n(25675),g=n.n(p),v=n(5152),C=n.n(v)()((function(){return n.e(307).then(n.bind(n,63048))}),{loadableGenerated:{webpack:function(){return[63048]}},ssr:!1});t.Z=function(){var e=(0,r.useState)([]),t=e[0],n=e[1],p=(0,r.useState)(""),v=p[0],b=p[1],x=(0,r.useRef)(null),j=(0,r.useRef)(null),k=(0,r.useState)(""),y=(k[0],k[1]),B=(0,r.useContext)(f.Il),w=(B.availableChats,B.setAvailableChats),N=(B.loading,(0,r.useContext)(f.Q8).messageData),I=(0,r.useState)(!1),S=(I[0],I[1]),F=(0,r.useState)(!1),T=(F[0],F[1]),E=(0,r.createRef)(),M=(0,r.useState)(!1),L=M[0],P=M[1],Z=(0,r.useState)("#999"),D=Z[0],R=Z[1],U=(0,r.useState)(),O=U[0],Q=U[1],A=(0,r.useState)([]),H=A[0],z=A[1];(0,r.useEffect)((function(){if("undefined"!==typeof document){var e=document.getElementsByClassName("modalcontent");z(Array.from(e))}}),[]),(0,r.useEffect)((function(){"new"!==N.type&&"scheduled"!==N.type||y(new Date)}),[N]);var G=function(){var e=(0,o.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:return[4,m.Z.get("/api/chat/history/",{headers:{Authorization:"Bearer ".concat(localStorage.getItem(d.B))}}).then((function(e){if(e.data.results.length>0){var o=e.data.results.filter((function(e){var t=localStorage.getItem("CRT");return new Date(t)<new Date(e.timestamp)}));n(o.reverse()),w(t)}}))];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){var e=setTimeout((function(){G()}),4e3);return function(){return clearTimeout(e)}}),[t,v]);var V,J=function(){if(v.length>1){var e=(0,_.Z)("/ws/chat/",(function(e){!function(e){var t=JSON.parse(e.data);console.log("messages: "+JSON.stringify(t))}(e)}));return e.onopen=function(){e.send(JSON.stringify({message:v}));G()},b(""),function(){e.close()}}return S(!0)},q=function(e){var t;e||(null===(t=x.current)||void 0===t||t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}))};return(0,r.useEffect)((function(){E.current.selectionEnd=O}),[O]),(0,r.useEffect)((function(){q()}),[t]),(0,c.jsxs)("div",{className:"".concat(i.chatContainer),children:[(0,c.jsxs)("div",{className:"".concat(i.chatMessagesContainer),children:[t.map((function(e){return e.is_me?(0,c.jsx)("div",{style:{marginBottom:"5px",marginLeft:"auto",marginRight:"0"},children:(0,c.jsxs)("div",{className:"block ".concat(i.ownerMessageContainer),children:[(0,c.jsx)("div",{className:"".concat(i.chatMessage),children:e.message}),(0,c.jsx)("div",{className:"".concat(i.chatTime),children:e.timestamp.slice(12,16)})]})}):(0,c.jsxs)("div",{className:"".concat(i.singleChat," flex align-center flex-gap:5"),children:[(null===(t=e.sender_user)||void 0===t?void 0:t.user.avatar)?(0,c.jsx)(g(),{src:"https://".concat("api.test.bingo12.com"+(null===(n=e.sender_user)||void 0===n?void 0:n.user.avatar)),alt:"pro",height:34,width:34}):(0,c.jsx)(g(),{alt:"avatar",height:34,width:34,src:"/static/images/profile.png"}),(0,c.jsxs)("div",{className:"block ".concat(i.chatMessageContainer),children:[(0,c.jsx)("div",{className:"".concat(i.chatUser),children:null===(o=e.sender_user)||void 0===o?void 0:o.user.username}),(0,c.jsx)("div",{className:"".concat(i.chatMessage),children:e.message}),(0,c.jsx)("div",{className:"".concat(i.chatTime),children:e.timestamp.slice(12,16)})]})]});var t,n,o})),(0,c.jsx)("div",{ref:x})]}),(0,c.jsxs)("form",{className:"".concat(i.chatForm," block"),style:(V={position:"sticky"},(0,a.Z)(V,"position","-webkit-sticky"),(0,a.Z)(V,"bottom",0),V),children:[L?(0,c.jsx)("div",{className:"".concat(u.EmojiPickerReact),children:(0,c.jsx)(C,{onEmojiClick:function(e,t){var n=e.emoji,o=E.current;o.focus();var a=v.substring(0,o.selectionStart),s=v.substring(o.selectionStart);b(a+n+s),Q(a.length+n.length)},height:40,width:280,emojiStyle:"native"})}):(0,c.jsx)(c.Fragment,{}),(0,c.jsxs)("div",{className:"".concat(i.chatInputContainer),children:[(0,c.jsxs)("div",{className:"".concat(i.chatPlaceHolderContainer),children:[(0,c.jsx)("input",{placeholder:"Type a message",style:{width:"90%",height:"20px"},value:v,onChange:function(e){return b(e.target.value)},ref:E,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),J())},className:"".concat(i.borderlessInput),autoFocus:!1,onFocus:function(){T(!0),"undefined"!==typeof document&&(console.log("hello input"),H.forEach((function(e){e.style.height="55%"})))},onBlur:function(){}}),(0,c.jsx)(h.yFw,{style:{margin:"5px"},onClick:function(){E.current.focus(),P(!L),R("#FF6D3F");var e=setTimeout((function(){q()}),300);return function(){return clearTimeout(e)}},color:D})]}),(0,c.jsx)("button",{type:"button",style:{padding:"9px 11px 0px 9px"},className:"orangeButton btn-chat",onClick:J,children:(0,c.jsx)(l.OIQ,{})})]}),(0,c.jsx)("div",{ref:j})]})]})}},43024:function(e,t,n){"use strict";var o=n(45840),a=n(3896);t.Z=function(e,t,n){var s=localStorage.getItem(a.B)?"?token="+localStorage.getItem(a.B):"",c=new o.w3cwebsocket("wss://api.test.bingo12.com"+e+s);return c.onmessage=t,c.onopen=function(e){n&&n(e.target.url,!1)},c.onclose=function(e){n&&n(e.target.url,!0)},c.onerror=function(e){console.log("error: ",e)},c}},83491:function(e){e.exports={EmojiPickerReact:"emoji-picker-custom_EmojiPickerReact__23wZF","epr-dark-theme":"emoji-picker-custom_epr-dark-theme__y6sUT"}},48732:function(e){e.exports={profileAvatar:"home_profileAvatar__F7m5S",hiLoQuestionMarkButton:"home_hiLoQuestionMarkButton__ee7ar",balance:"home_balance__tyDni",priceButton:"home_priceButton__DClUG",collectButton:"home_collectButton__IktKz",logoutButton:"home_logoutButton__5aqMI",buyHiLoButton:"home_buyHiLoButton__RNI1h",purchaseAmount:"home_purchaseAmount__2VW5T",purchaseCardsStyle:"home_purchaseCardsStyle__8qOpd",hiLoPlayButton:"home_hiLoPlayButton__bTtBU",hiLoContainer:"home_hiLoContainer__XL_we",chatContainer:"home_chatContainer__5MPU2",chatMessagesContainer:"home_chatMessagesContainer__YIogk",chatIcon:"home_chatIcon__cFHjr",icon:"home_icon__9K_pj",singleChat:"home_singleChat__3m4zQ",chatMessageContainer:"home_chatMessageContainer__1la5n",chatMessage:"home_chatMessage__ZC2lI",chatTopBar:"home_chatTopBar__AbJrx",backToGame:"home_backToGame__Oc62t",playersCount:"home_playersCount__qUFMy",chatInputContainer:"home_chatInputContainer__2RjgH",chatPlaceHolderContainer:"home_chatPlaceHolderContainer__mO95h",borderlessInput:"home_borderlessInput___9QOs",chatUser:"home_chatUser__EGrza",chatTime:"home_chatTime__CLa_z",ownerMessageContainer:"home_ownerMessageContainer__Zl1H5",chatForm:"home_chatForm__E_zhU",EmojiPickerReact:"home_EmojiPickerReact__T4XPi",mobileFeatures:"home_mobileFeatures__FfNBD",desktopFeatures:"home_desktopFeatures__Zk2Qj",rightSideDesktopFeatures:"home_rightSideDesktopFeatures__cQyUb",active:"home_active__7prY2",buyButton:"home_buyButton__5xena",hiLoButton:"home_hiLoButton__iIVDP",purchaseButton:"home_purchaseButton__iVjf6","onmobile-device":"home_onmobile-device__rQ36P",homeTitle:"home_homeTitle__xTsiI",mobileLandscapeView:"home_mobileLandscapeView__T_96D",hiLoPricesContainer:"home_hiLoPricesContainer__FWRjG",chatInnerContainer:"home_chatInnerContainer__h8k1F"}}}]);